<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>EcoFinds Dashboard</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css">
    <link rel="stylesheet" href="dashboard.css">
</head>
<body>
    <!-- Hero SVG wave background -->
    <div class="hero-wave">
        <svg width="100%" height="180" viewBox="0 0 1440 180" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M0 80 Q360 180 720 80T1440 80V180H0V80Z" fill="#b2dfdb" fill-opacity="0.35"/>
            <path d="M0 120 Q360 20 720 120T1440 120V180H0V120Z" fill="#00c9ff" fill-opacity="0.13"/>
        </svg>
    </div>

    <!-- Floating eco icons -->
    <svg class="eco-icon leaf" viewBox="0 0 48 48"><path d="M24 44C24 44 44 34 44 14C44 8 38 4 32 4C28 4 24 8 24 8C24 8 20 4 16 4C10 4 4 8 4 14C4 34 24 44 24 44Z" fill="#43a047"/></svg>
    <svg class="eco-icon recycle" viewBox="0 0 54 54"><circle cx="27" cy="27" r="27" fill="#00c9ff"/><path d="M27 12L32 22H22L27 12Z" fill="#fff"/><path d="M42 32L32 27V37L42 32Z" fill="#fff"/><path d="M12 32L22 37V27L12 32Z" fill="#fff"/></svg>
    <svg class="eco-icon globe" viewBox="0 0 60 60"><circle cx="30" cy="30" r="30" fill="#92fe9d"/><ellipse cx="30" cy="30" rx="18" ry="28" fill="#fff" fill-opacity="0.3"/></svg>

    <nav class="navbar navbar-expand-lg navbar-light bg-light px-3">
        <a class="navbar-brand" href="landingpage.html">EcoFinds</a>
        <div class="ms-auto" id="navbar-links">
            <a href="dashboard.html" class="me-2">Profile</a>
            <button class="btn position-relative" onclick="window.location.href='purchase.html'">
                <img src="https://img.icons8.com/material-outlined/24/000000/shopping-cart--v1.png"/>
                <span class="badge bg-danger rounded-pill cart-badge" id="cart-count">1</span>
            </button>
        </div>
    </nav>

    <div class="container-fluid dashboard-container">
        <div class="row">
            <!-- Sidebar -->
            <div class="col-md-3 col-lg-2 sidebar">
                <div class="user-profile-mini">
          <div class="profile-photo">
                        <img src="https://via.placeholder.com/80" alt="Profile Photo">
                    </div>
                    <div class="user-info">
                        <h3>Jane Doe</h3>
                        <p>eco_jane</p>
                    </div>
                </div>
                <nav class="dashboard-nav">
                    <a href="dashboard.html" class="nav-item active">
                        <i class="bi bi-house-door"></i>
                        <span>Overview</span>
                    </a>
                    <a href="purchase.html" class="nav-item">
                        <i class="bi bi-bag"></i>
                        <span>My Purchases</span>
                    </a>
                    <a href="listting.html" class="nav-item">
                        <i class="bi bi-grid"></i>
                        <span>My Listings</span>
                    </a>
                    <a href="#" class="nav-item">
                        <i class="bi bi-graph-up"></i>
                        <span>Analytics</span>
                    </a>
                    <a href="#" class="nav-item">
                        <i class="bi bi-chat"></i>
                        <span>Messages</span>
                    </a>
                    <a href="#" class="nav-item">
                        <i class="bi bi-gear"></i>
                        <span>Settings</span>
                    </a>
                </nav>
            </div>

            <!-- Main Content -->
            <div class="col-md-9 col-lg-10 main-content">
                <div style="margin: 1rem 0;">
                    <button class="btn btn-outline-success" onclick="window.location.href='dashboard.html'">
                        <i class="bi bi-arrow-left"></i> Back to Dashboard
                    </button>
                </div>
                <div class="dashboard-header">
                    <h1>Welcome back, Jane!</h1>
                    <p class="date">Today is <span id="current-date"></span></p>
                </div>

                <!-- Quick Stats -->
                <div class="row quick-stats">
                    <div class="col-md-3">
                        <div class="stat-card">
                            <div class="stat-icon orders">
                                <i class="bi bi-bag"></i>
                            </div>
                            <div class="stat-info">
                                <h3>12</h3>
                                <p>Total Orders</p>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="stat-card">
                            <div class="stat-icon wishlist">
                                <i class="bi bi-heart"></i>
                            </div>
                            <div class="stat-info">
                                <h3>7</h3>
                                <p>Wishlist Items</p>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="stat-card">
                            <div class="stat-icon deliveries">
                                <i class="bi bi-truck"></i>
                            </div>
                            <div class="stat-info">
                                <h3>3</h3>
                                <p>Pending Deliveries</p>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="stat-card">
                            <div class="stat-icon eco-points">
                                <i class="bi bi-leaf"></i>
                            </div>
                            <div class="stat-info">
                                <h3>450</h3>
                                <p>Eco Points</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Recent Activity & Profile -->
                <div class="row mt-4">
                    <div class="col-lg-8">
                        <div class="card recent-activity">
                            <div class="card-header">
                                <h2>Recent Activity</h2>
                                <a href="#" class="view-all">View All</a>
                            </div>
                            <div class="activity-list">
                                <div class="activity-item">
                                    <div class="activity-icon">
                                        <i class="bi bi-bag-check"></i>
                                    </div>
                                    <div class="activity-details">
                                        <h4>Order Delivered</h4>
                                        <p>Your order #1234 has been delivered</p>
                                        <span class="activity-time">2 hours ago</span>
                                    </div>
                                </div>
                                <div class="activity-item">
                                    <div class="activity-icon">
                                        <i class="bi bi-heart"></i>
                                    </div>
                                    <div class="activity-details">
                                        <h4>New Wishlist Item</h4>
                                        <p>You added "Eco-Friendly Lamp" to your wishlist</p>
                                        <span class="activity-time">Yesterday</span>
                                    </div>
                                </div>
                                <div class="activity-item">
                                    <div class="activity-icon">
                                        <i class="bi bi-star"></i>
                                    </div>
                                    <div class="activity-details">
                                        <h4>Review Posted</h4>
                                        <p>You reviewed "Bamboo Cutlery Set"</p>
                                        <span class="activity-time">2 days ago</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-4">
                        <div class="card profile-card">
                            <div class="card-header">
                                <h2>Profile Overview</h2>
                                <button class="edit-profile-btn" id="openEditProfileModal">
                                    <i class="bi bi-pencil"></i>
                                </button>
                            </div>
                            <div class="profile-details">
                                <div class="profile-info-item">
                                    <i class="bi bi-envelope"></i>
                                    <span id="profile-email">jane.doe@example.com</span>
                                </div>
                                <div class="profile-info-item">
                                    <i class="bi bi-geo-alt"></i>
                                    <span id="profile-address">Portland, OR</span>
                                </div>
                                <div class="profile-info-item">
                                    <i class="bi bi-calendar"></i>
                                    <span>Member since Jan 2023</span>
                                </div>
                                <div class="profile-info-item">
                                    <i class="bi bi-person-badge"></i>
                                    <span id="profile-nickname">Buyer & Seller</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Edit Profile Modal -->
    <div class="modal fade" id="editProfileModal" tabindex="-1" aria-labelledby="editProfileModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="editProfileModalLabel">Edit Profile</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="editProfileForm">
                        <div class="mb-3 text-center">
                            <label for="profilePhotoInput" class="form-label">Profile Photo</label><br>
                            <img id="profilePhotoPreview" src="https://via.placeholder.com/80" alt="Profile Photo" class="rounded-circle mb-2" style="width:80px;height:80px;object-fit:cover;">
                            <input class="form-control mt-2" type="file" id="profilePhotoInput" accept="image/*">
                        </div>
                        <div class="mb-3">
                            <label for="nicknameInput" class="form-label">Nickname</label>
                            <input type="text" class="form-control" id="nicknameInput" value="Jane Doe">
                        </div>
                        <div class="mb-3">
                            <label for="emailInput" class="form-label">Email</label>
                            <input type="email" class="form-control" id="emailInput" value="jane.doe@example.com">
                        </div>
                        <div class="mb-3">
                            <label for="addressInput" class="form-label">Address</label>
                            <input type="text" class="form-control" id="addressInput" value="Portland, OR">
                        </div>
                        <button type="submit" class="btn btn-success w-100">Save Changes</button>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // Set current date
        const options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
        document.getElementById('current-date').textContent = new Date().toLocaleDateString('en-US', options);

        // Edit Profile Modal logic
        const editBtn = document.getElementById('openEditProfileModal');
        const editProfileModal = new bootstrap.Modal(document.getElementById('editProfileModal'));
        editBtn.addEventListener('click', () => {
            editProfileModal.show();
        });

        // Profile photo preview
        const profilePhotoInput = document.getElementById('profilePhotoInput');
        const profilePhotoPreview = document.getElementById('profilePhotoPreview');
        profilePhotoInput.addEventListener('change', function() {
            const file = this.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    profilePhotoPreview.src = e.target.result;
                }
                reader.readAsDataURL(file);
            }
        });

        // Save changes and update profile info
        const editProfileForm = document.getElementById('editProfileForm');
        editProfileForm.addEventListener('submit', function(e) {
            e.preventDefault();
            document.querySelector('.profile-photo img').src = profilePhotoPreview.src;
            document.querySelector('.user-info h3').textContent = document.getElementById('nicknameInput').value;
            document.getElementById('profile-nickname').textContent = document.getElementById('nicknameInput').value;
            document.getElementById('profile-email').textContent = document.getElementById('emailInput').value;
            document.getElementById('profile-address').textContent = document.getElementById('addressInput').value;
            editProfileModal.hide();
        });

        const searchBar = document.getElementById('searchBar');
        const categories = document.querySelectorAll('.card__title');
        const categoryCards = document.querySelectorAll('#category-list .col-md-4');
        const noResults = document.getElementById('no-results');
        const cartCount = document.getElementById('cart-count');

        let cartItems = 0; // Simulated cart count

        searchBar.addEventListener('input', (e) => {
            const keyword = e.target.value.toLowerCase();
            let found = false;

            categoryCards.forEach((card, index) => {
                const text = categories[index].textContent.toLowerCase();
                if (text.includes(keyword)) {
                    card.style.display = 'block';
                    found = true;
                } else {
                    card.style.display = 'none';
                }
            });

            noResults.classList.toggle('d-none', found);
        });

        // Simulate adding item to cart and updating in real time
        setInterval(() => {
            cartItems = (cartItems + 1) % 10;
            cartCount.textContent = cartItems;
        }, 3000);
    </script>
</body>
</html>
